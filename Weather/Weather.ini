[Rainmeter]
Update=1000
Author=Khinenw

[Metadata]
Name=Fluent Weather
Information=Let you know you should wear short sleeves or you should bring your umbrella
Author=Khinenw
Version=1.11
License=MIT License

[Variables]
Width=300
Height=80
@Include=#@#Default.inc
@IncludeText=#@#Layouts/Text.inc
@IncludeIcons=WeatherIcon.inc

[MeasureWeather]
Measure=WebParser
Url="http://wxdata.weather.com/wxdata/weather/local/#LocationCode#?cc=*&unit=#WeatherUnit#&dayf=1"
RegExp="(?siU).*<cc>.*<tmp>(.*)</tmp>.*<t>(.*)</t>.*<icon>(.*)</icon>.*<bar>.*<hmid>(.*)</hmid>.*</cc>.*"
UpdateRate=600

[MeasureTemperature]
Measure=WebParser
URL=[MeasureWeather]
StringIndex=1

[MeasureWeatherText]
Measure=WebParser
URL=[MeasureWeather]
StringIndex=2

[MeasureWeatherIcon]
Measure=WebParser
URL=[MeasureWeather]
StringIndex=3

[MeasureWeatherIconComputed]
Measure=String
String=[#IconWeather[&MeasureWeatherIcon]]
Substitute="[#*IconWeather*]":""
DynamicVariables=1

[MeasureHumidity]
Measure=WebParser
URL=[MeasureWeather]
StringIndex=4

[MeasureShowHumidity]
Measure=Calc
Formula=(#ShowHumidity# > 0) ? 17 : 1
UpdateDivider=-1

[MeasureHumidityAlpha]
Measure=String
String=#ShowHumidity#0
Substitute="1":"a"

[MeterBackground]
[MeterLabel]
[MeterIcon]
MeasureName=MeasureWeatherIconComputed
Text=%1

[MeterText]
MeasureName=MeasureWeatherText
FontWeight=300
FontSize=10
Text=%1
StringAlign=LeftCenter
X=(#LabelHeight# + 20)
Y=(#Height# / 2 - 17)

[MeterText2]
Meter=String
MeterStyle=StyleTextLayout
MeasureName=MeasureTemperature
MeasureName2=MeasureHumidity
Text=%1#WeatherUnitText# %2%
FontSize=17
FontWeight=600
StringAlign=LeftCenter
X=(#LabelHeight# + 20)
Y=27r

InlinePattern=(\d*%)$
InlineSetting=Size | [MeasureShowHumidity]
InlinePattern2=(\d*%)$
InlineSetting2=Weight | 400
InlinePattern3=(\d*%)$
InlineSetting3=Color | #TextColor#[MeasureHumidityAlpha]
